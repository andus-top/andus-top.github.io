<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="keywords" content="个人博客, 松林羊, ysl, songlinsheep, andus, blog, 个人站点, 个人网站"><meta name="description" content="松林羊的个人网站，用于记录，分享。欢迎交流^-^"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><title> Redis(三)-五大数据类型+操作命令 | 松林羊</title><link rel="shortcut icon" href="/smile.ico"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css"><script src="/js/pace.min.js"></script><script>!function(e,t,o,c,i,a,n){e.DaoVoiceObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,a=t.createElement(o),n=t.getElementsByTagName(o)[0],a.async=1,a.src=c,a.charset="utf-8",n.parentNode.insertBefore(a,n)}(window,document,"script",("https:"==document.location.protocol?"https:":"http:")+"//widget.daovoice.io/widget/0f81ff2f.js","daovoice"),daovoice("init",{app_id:"1559132c"}),daovoice("update")</script></head></html><body><main class="content"><section class="outer"><article id="post-Redis-三-五大数据类型-操作命令" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name"> Redis(三)-五大数据类型+操作命令</h1></header><div class="article-meta"> <a href="/2019/07/27/Redis-三-五大数据类型-操作命令/" class="article-date"><time datetime="2019-07-27T15:33:32.000Z" itemprop="datePublished">2019-07-27</time></a><div class="article-category"> <a class="article-category-link" href="/categories/数据库/">数据库</a></div> &emsp;<i class="fe fe-bar-chart"></i> <span class="post-count">1.5k</span>字 &emsp;<i class="fe fe-clock"></i> <span class="post-count">6</span>分钟</div><div class="tocbot"></div><div class="article-entry" itemprop="articleBody"><h2 id="常用五大数据类型"><a href="#常用五大数据类型" class="headerlink" title="常用五大数据类型"></a>常用五大数据类型</h2><ul><li>string、list、hash、set、sorted set</li></ul><h3 id="五大数据类型-String"><a href="#五大数据类型-String" class="headerlink" title="五大数据类型-String"></a>五大数据类型-String</h3><ul><li>sting 是redis最基本的类型</li><li>是二进制安全的，即redis的string可以包含任何数据。如图片或者序列化的对象。</li><li>单个string类型的value大小限制为<strong>512M</strong></li><li>常用操作<ul><li><code>set key val</code>：redis的insert操作。key存在时，值会被覆盖</li><li><code>get key</code>：redis的select操作</li><li><code>del key</code>：redis的删除操作</li><li><code>append key abc</code>：将abc追加到原字符串后面，形成新的字符串。key不存在时会执行insert操作</li><li><code>strlen key</code>：查看当前key字符串长度。<font color="red">一个汉字占<code>3个字符</code></font></li><li><code>incr key</code>：值加一。(要求字符串为数字)</li><li><code>decr key</code>：值减一。(要求字符串为数字)</li><li><code>incrby key 3</code>：值加3</li><li><code>decrby key 3</code>：值减3</li><li><code>getrange key 0 3</code>：得到字符串的前4个字符。(<font color="red">注意redis中是前后都取</font>)</li><li><code>setrange key 0 abc</code>：字符串部分替换。本例：从下标0开始，使用abc替换原字符串中对应位置的字符串。如果原字符串为123456，执行后为，abc456</li><li><code>setex key 10 val</code>：设置一个生命周期为<code>10秒</code>的kv对</li><li><code>setnx key val</code>：如果key不存在，执行insert操作。否则，不执行任何操作</li><li><code>mset k1 v1 k2 v2 k3 v3</code>：同时设置多个kv对。 (key已存在，值会被覆盖)</li><li><code>mget k1 k2 k3</code>：同时获取多个值</li><li><code>msetnx k1 v1 k2 v2 k3 v3</code>：当k1，k2，k3<font color="red">都不存在</font>时才执行insert操作。否则，不执行任何操作</li></ul></li></ul><h3 id="五大数据类型-hash（重要）"><a href="#五大数据类型-hash（重要）" class="headerlink" title="五大数据类型-hash（重要）"></a>五大数据类型-<font color="red">hash</font>（重要）</h3><ul><li>是一个键值对集合，类似java里的Map</li><li>是一个string类型的key和value的映射表。即，value是一个键值对，其key为String类型</li><li>适合存储对象。类似java中Map&lt;String, Object&gt;</li><li>常用操作<ul><li><code>hset user id 123 name ysl</code>：新建一个hash，key：user，value包含id、name，值分别为123、ysl</li><li><code>hget user id</code>：获取user中id的值</li><li><code>hmset user id 123 name ysl age 23</code>：新建一个hash，key：user，value包含id、name、age，值分别为123、ysl、23</li><li><code>hmget user id name age</code>：批量获取值</li><li><code>hgetall user</code>：获取user中所有的k-v对</li><li><code>hdel user age</code>：删除user中age键值对</li><li><code>hlen user</code>：user中包含的k-v对的个数</li><li><code>hexists user email</code>：user中是否包含email这个key</li><li><code>hkeys user</code>：user中所有的key。(id、name、age)</li><li><code>hvals user</code>：user中所有的value。(123、ysl、23)</li><li><code>hincrby user age 2</code>：user中age对应的值+2</li><li><code>hincrbyfloat user score 1.5</code>：user中score对应的值+1.5</li><li><code>hsetnx user age 3</code>：user中不存在age时，执行插入操作</li></ul></li></ul><h3 id="五大数据类型-list"><a href="#五大数据类型-list" class="headerlink" title="五大数据类型-list"></a>五大数据类型-list</h3><ul><li>一个字符串列表，按照插入顺序排序，可以在列表首尾添加元素</li><li>底层是一个链表。（操作链表首位效率高，中间低）</li><li>值全部移除，对应的列表也就没有了</li><li>常用操作<ul><li><code>lpush list01 1 2 3 4 5</code>：创建list01，并插入值。（正进反出）</li><li><code>lrange list01 0 -1</code>：从0(起始)到-1(结束位置)，查看列表中元素。结果为：<code>5 4 3 2 1</code></li><li><code>rpush list02 1 2 3 4 5</code>：创建list01，并插入值。(正进正出)。此时lrange list02 0 -1, 结果为：<code>1 2 3 4 5</code></li><li><code>lpop list01</code> ：取列表顶部第一个元素。(list01得到5，list02得到1)</li><li><code>rpop list01</code>：取列表底部第一个元素。(list01得到1，list02得到5)</li><li><code>lindex list01 2</code>：取列表下标为2的元素</li><li><code>llen list01</code>：列表长度</li><li><code>lrem list01 N val</code>：删除N个Value</li><li><code>ltrim list01 start end</code>：截取下标从start到end的值，重新赋值给list01</li><li><code>rpoplpush list01 list02</code>：将list01的底部元素移动到list02的顶部。(只移动一个)</li><li><code>lset list01 idx value</code>：修改列表指定下标的值为value</li><li><code>linsert list01 before/after val1 val2</code>：在值为val1之前/之后插入val2</li></ul></li></ul><h3 id="五大数据类型-set"><a href="#五大数据类型-set" class="headerlink" title="五大数据类型-set"></a>五大数据类型-set</h3><ul><li>set是string类型的元素集合，无序无重复，通过HashTable实现</li><li>常用操作<ul><li><code>sadd set01 1 1 2 2 3 3</code>：向集合set01(没有会创建)中添加1 2 3</li><li><code>smembers set01</code>：查看集合中的元素</li><li><code>sismember set01 1</code>：值1是否在集合set01中</li><li><code>scard set01</code>：获取集合中元素个数</li><li><code>srem set01 val1</code>：删除集合中指定元素</li><li><code>srandmember key N</code>：从集合中，随机取N个元素</li><li><code>spop set01</code>：随机取一个元素</li><li><code>smove set01 set02 val1</code>：将set01中的val1移动到set02中</li><li><code>sdiff set01 set02 set03</code>：求集合的差集。得到的数据是：在第一个set中，不在后面任何一个set中的元素项</li><li><code>sinter set01 set02 set03</code>：求集合交集。得到的数据：所有集合中都有的元素项</li><li><code>sunion set01 set02</code>：求集合并集。得到的数据：所有集中元素项去重后的结果</li></ul></li></ul><h3 id="五大数据类型-sorted-set-zset"><a href="#五大数据类型-sorted-set-zset" class="headerlink" title="五大数据类型-sorted set (zset)"></a>五大数据类型-sorted set (zset)</h3><ul><li><p>与set一样是string类型元素集合，有序无重复</p></li><li><p>每个元素都关联一个double类型的分数(score)，redis正是通过分数来为集合中的成员进行从小到大的排序, set的 成员是唯一的，但分数却可以重复</p><p> 可以理解为，key与set中一样，只不过 value 变成了 score与数据值</p></li><li><p>常用操作</p><ul><li><code>zadd zset01 60 val1 70 val2 80 val3</code>：新建一个zset。key：zset01，value：60 val1、70 val2…</li><li><code>zrange zset01 0 -1</code>：获取zset01中所有的值</li><li><code>zrange zset01 0 -1 withscores</code>：获取zset01中所有值，及其对应的分数</li><li><code>zrangebyscore zset01 60 (80</code>：获取score从60到80之间的数据（包含60不包含80），并按照score排序</li><li><code>zrangebyscore zset01 60 80 limit 2 3</code>：获取score从60到80之间数据，并按照score排序。再取结果中下标为2到5（2+3）的数据项作为最终的结果</li><li><code>zrem zset01 val1</code>：删除zset01下值为val1的项</li><li><code>zcard zset01</code>：统计zset01中元素个数</li><li><code>zcount zset01 60 80</code>：统计score从60到80之间的元素个数</li><li><code>zrank zset01 val1</code>：获取val1对应的下标</li><li><code>zscore zset01 val1</code>：获取val1对应的score</li><li><code>zrevrank key val1</code>：逆序获取val1的下标</li><li><code>zrevrange zset01 0 -1</code>：逆序获取集合</li><li><code>zrevrangebyscore zset01 80 60</code>：获取zset01中结束score到开始score的元素项</li></ul></li></ul><p>说明：redis5.x新增了<a href="https://yq.aliyun.com/articles/698601" target="_blank" rel="noopener">Stream流数据类型</a></p></div><footer class="article-footer"><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Redis/">Redis</a></li></ul><div style="text-align:center;color:#ccc;font-size:14px;margin-top:10px"> ------------- 本文结束&nbsp;<i class="fe fe-smile"></i>&nbsp;感谢您的阅读 -------------</div></footer></div><nav class="article-nav"> <a href="/2019/07/29/Redis-四-配置文件解读/" class="article-nav-link"><strong class="article-nav-caption">前一篇</strong><div class="article-nav-title"> Redis(四)-配置文件解读</div></a> <a href="/2019/07/22/Redis-二-入门基础知识-基础命令/" class="article-nav-link"><strong class="article-nav-caption">后一篇</strong><div class="article-nav-title">Redis(二)-入门基础知识+基础命令</div></a></nav><div class="comment_headling" style="margin-top:5rem"><font size="5"><i class="fe fe-comments"></i> 评论</font></div><div class="comment"></div><script src="https://cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="/js/Valine.min.js"></script><script type="text/javascript">GUEST_INFO=["nick","mail","link"],guest_info="nick,mail,link".split(",").filter(function(i){return-1<GUEST_INFO.indexOf(i)}),guest_info=0==guest_info.length?GUEST_INFO:guest_info,new Valine({av:AV,el:".comment",app_id:"fq4O7Xaf1cYDbADGellNEn6V-gzGzoHsz",app_key:"a626rNIHkVVk8tGBBCfaQjb9",placeholder:"记得留下你的昵称和邮箱...可以快速收到回复ヾﾉ≧∀≦)o",meta:guest_info,notify:!0,verify:!1,avatar:"monsterid",recordIP:!0,visitor:!1,lang:"zh-cn"})</script></article></section><footer class="footer"><div class="outer"><ul class="list-inline"><li>已分享 48 篇博文，累计 <span class="post-count">55.1k</span> 字</li><ul class="list-inline"><li><i class="fe fe-smile-alt"></i>&nbsp;访客数&emsp;<span id="busuanzi_value_site_uv"></span></li><li><i class="fe fe-bookmark"></i>&nbsp;文章访问量&emsp;<span id="busuanzi_value_page_pv"></span></li></ul></ul><ul class="list-inline"><li><span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span></li><script>var now=new Date;function createtime(){var n=new Date("07/28/2019 10:02:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="已等候你 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}setInterval("createtime()",250)</script><ul class="list-inline"><li>&copy; 2019-2019 松林羊</li><li>Theme <a href="https://github.com/zhwangart/hexo-theme-ocean">Ocean</a></li></ul></ul></div></footer></main><aside class="sidebar sidebar-specter"> <button class="navbar-toggle"></button><nav class="navbar"><div class="logo"> <a href="/"><img id="andus-head-img" src="/images/head-nav.png" alt="松林羊"></a></div><ul class="nav nav-main"><li class="nav-item"> <a class="nav-item-link" href="/" target="_self">主页</a></li><li class="nav-item"> <a class="nav-item-link" href="/archives" target="_self">归档</a></li><li class="nav-item"> <a class="nav-item-link" href="/categories" target="_self">分类</a></li><li class="nav-item"> <a class="nav-item-link" href="/tags" target="_self">标签</a></li><li class="nav-item"> <a class="nav-item-link" href="/links" target="_self">友链</a></li><li class="nav-item"> <a class="nav-item-link">综合</a><ul class="nav nav-main nav2"><li class="nav-item li2"> <a class="nav-item-link-child" href="/resource" target="_self">资 源</a></li><li class="nav-item li2"> <a class="nav-item-link-child" href="/site" target="_self">网 站</a></li></ul></li><li class="nav-item"> <a class="nav-item-link">关于</a><ul class="nav nav-main nav2"><li class="nav-item li2"> <a class="nav-item-link-child" href="/me" target="_self">博 主</a></li><li class="nav-item li2"> <a class="nav-item-link-child" href="http://stars.andus.top/" target="_blank">记 录</a></li><li class="nav-item li2"> <a class="nav-item-link-child" href="/plan" target="_self">计 划</a></li></ul></li><li class="nav-item"> <a class="nav-item-link" href="http://resume.andus.top/" target="_blank">简 历</a></li><li class="nav-item"><a class="nav-item-link nav-item-search" title="搜索"><i class="fe fe-search"></i> 搜索</a></li></ul></nav><nav class="navbar navbar-bottom"><ul class="nav"><li class="nav-item"><div class="totop" id="totop"><i class="fe fe-rocket"></i></div></li><li class="nav-item"></li></ul></nav><div class="search-form-wrap"><div class="local-search local-search-plugin"> <input type="search" id="local-search-input" class="local-search-input" placeholder="Search..."><div id="local-search-result" class="local-search-result"></div></div></div></aside><script src="/js/jquery-2.0.3.min.js"></script><script src="/js/jquery.justifiedGallery.min.js"></script><script src="/js/lazyload.min.js"></script><script src="/js/busuanzi-2.3.pure.min.js"></script><script src="/fancybox/jquery.fancybox.min.js"></script><script src="/js/tocbot.min.js"></script><script>900<=document.body.clientWidth&&tocbot.init({tocSelector:".tocbot",contentSelector:".article-entry",headingSelector:"h1, h2, h3, h4, h5, h6",hasInnerContainers:!0,scrollSmooth:!0,positionFixedSelector:".tocbot",positionFixedClass:"is-position-fixed",fixedSidebarOffset:"auto"})</script><script src="/js/ocean.js"></script><script src="/js/andus.js"></script><script src="/js/love.js"></script><script>$("img:not(#andus-head-img)").each(function(){$(this).wrap('<a class="fancybox" data-fancybox="gallery" href="'+$(this).prop("src")+'"></a>')})</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({model:{scale:1,hHeadPos:.5,vHeadPos:.618,jsonPath:"/live2dw/assets/haruto.model.json"},display:{superSample:2,width:150,height:300,position:"left",hOffset:0,vOffset:-20},mobile:{show:!1},react:{opacityDefault:.5,opacityOnHover:.2},log:!1,pluginJsPath:"lib/",pluginModelPath:"assets/",pluginRootPath:"live2dw/",tagMode:!1})</script></body>